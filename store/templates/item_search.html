{% extends "layout.html" %}
{% block body %}
   <script type="text/javascript">

   var count_tr=9;
   var tr = [];




  $(document).ready(function() {
   var table_grid = document.getElementById('grid');
   function creat_grid(count){
     for (var i=1; i<=count;i++ ){
       tr[i] = document.createElement('TR');
       table_grid.appendChild(tr[i]);
       tr[i].id=i;
       if (i % 2 == 0) tr[i].style.background = "#c0c0c0";
         for (var j=0; j<=1; j++){
           tr[i].appendChild(document.createElement('TD'));}
       }
     }

    creat_grid(count_tr);

  create_entity()

  $('#search_button').click(function(){
                create_entity()
            });

  function create_entity(){
       var name_input = document.getElementById('name_input').value;
       var product_options = document.getElementById('product_options').value;
       $.ajax({
        dataType: "json",
        url: '/api/search_product?name_input='+name_input+'&product_option='+product_options+'',
        type: 'GET',
        contentType: "application/json",
        success: function(json)
        {
            ajax_success(json);
         }
      })
  }

function ajax_success(json){
         creat_grid(json.products.length)
        for (var product_k in json.products)
          {
           k++;
      tr[k].cells[0].innerHTML = json.products[product_k].name;
      tr[k].cells[1].innerHTML = json.products[product_k].description;
          }
}




  })


   </script>


<div class=" ">
   <form class='form' action="">
    <div class="field" style="width: 510px;">
          <lable style="float: left; line-height: 35px; padding-right:10px;">Search for item by: </lable>
          <select id="product_options" style="width: 150px;float: left; margin:0px;">
              <option value="0">Item Name</option>
              <option value="1">Item Description</option>
          </select>
    <input type="text" id="name_input" >
    </div>
    <span><input type="button" value="Search" id='search_button' style="float: right; margin-top: -33px"></span>
   </form>
   </div>
</div>



<div id="item_table">
  <table id='grid' class="grid">
    <tr>
      <th>
        Item Name
      </th>
      <th>
        Item Description
      </th>
    </tr>
  </table>
</div>


<form action="" id="info">
<fieldset style="width: 600px; height: 200px">

</fieldset>
</form>


{% endblock body %}