{% extends "layout.html" %}
{% block body %}

        <script type="text/javascript">

            var tr = [];

            $(document).ready (function() {
            var count_tr=$('#table_size').val();
            var count_td=2;
            var page = 1;
            var table_grid = document.getElementById('grid');

            function creat_grid(count)
                {
                    for (var i=1; i<=count;i++ )
                        {
                            tr[i] = document.createElement('TR');
                            table_grid.appendChild(tr[i]);
                            tr[i].id=i;
                            if (i % 2 == 0) tr[i].style.background = "#c0c0c0";
                            for (var j=0; j<=1; j++)
                                {
                                    tr[i].appendChild(document.createElement('TD'));
                                }
                        }
                    $( "tr:even" ).css( "background-color", "#c0c0c0" );
                }

            function deleting_grid()
                {
                    for (var n=table_grid.rows.length ; n>=2; n--)
                        {
                            table_grid.removeChild(table_grid.childNodes[n]);
                        }

                }

            $('#search_button').click(function(){
                search()
            });

            function ajax_success(json){
                deleting_grid();
                creat_grid(json.products.length);
                for (var product_k in json.products)
                    {
                        k++;
                        tr[k].cells[0].innerHTML = json.products[product_k].name;
                        tr[k].cells[1].innerHTML = json.products[product_k].description;

                    }
                    k=0;
            }



            var k=0;



            $(document).ready(function search(){
                var name = document.getElementById('name').value

                $.ajax({
                dataType: "json",
                url: '/api/search_product?page=&name='+name+'',
                type: 'GET',
                contentType: "application/json",
                success: function(json)
                    {
                        ajax_success(json);

                    }
                })
            });


            });

        </script>

<div class=" ">
   <form class='form' action="">
    <div class="field" style="width: 510px;">
          <lable style="float: left; line-height: 35px; padding-right:10px;">Search for item by: </lable>
          <select id="product_options" style="width: 150px;float: left; margin:0px;">
              <option value="0">Item Name</option>
              <option value="1">Item Description</option>
          </select>
    <input type="text" id="name" >
    </div>
    <span><input type="button" value="Search" id='search_button' style="float: right; margin-top: -33px"></span>
   </form>
   </div>
</div>

            <div id=" ">
                <table id='grid' class="grid">
                    <tr>
                        <th>
                            Product
                        </th>
                        <th>
                            Description
                        </th>
                    </tr>
                </table>




            </div>
        </div>
{% endblock body %}